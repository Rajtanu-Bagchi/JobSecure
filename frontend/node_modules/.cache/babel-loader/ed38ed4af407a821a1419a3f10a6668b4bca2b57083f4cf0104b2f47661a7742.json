{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Get user from localStorage\nconst user = JSON.parse(localStorage.getItem('user'));\nconst initialState = {\n  user: user || null,\n  isAuthenticated: !!user,\n  isLoading: false,\n  error: null\n};\n\n// Register user\nexport const registerUser = createAsyncThunk('auth/register', async (userData, thunkAPI) => {\n  try {\n    const response = await axios.post('/api/auth/register', userData);\n    if (response.data) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'Registration failed';\n    return thunkAPI.rejectWithValue(message);\n  }\n});\n\n// Login user\nexport const loginUser = createAsyncThunk('auth/login', async (userData, thunkAPI) => {\n  try {\n    const response = await axios.post('/api/auth/login', userData);\n    if (response.data) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message || 'Login failed';\n    return thunkAPI.rejectWithValue(message);\n  }\n});\n\n// Logout user\nexport const logoutUser = createAsyncThunk('auth/logout', async () => {\n  localStorage.removeItem('user');\n});\n\n// Verify email with OTP\nexport const verifyEmail = createAsyncThunk('auth/verifyEmail', async (verificationData, thunkAPI) => {\n  try {\n    const response = await axios.post('/api/auth/verify-email', verificationData);\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || error.message || 'Email verification failed';\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    reset: state => {\n      state.isLoading = false;\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Register cases\n    .addCase(registerUser.pending, state => {\n      state.isLoading = true;\n    }).addCase(registerUser.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isAuthenticated = true;\n      state.user = action.payload;\n    }).addCase(registerUser.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      state.user = null;\n      state.isAuthenticated = false;\n    })\n    // Login cases\n    .addCase(loginUser.pending, state => {\n      state.isLoading = true;\n    }).addCase(loginUser.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isAuthenticated = true;\n      state.user = action.payload;\n    }).addCase(loginUser.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      state.user = null;\n      state.isAuthenticated = false;\n    })\n    // Logout case\n    .addCase(logoutUser.fulfilled, state => {\n      state.user = null;\n      state.isAuthenticated = false;\n    })\n    // Email verification cases\n    .addCase(verifyEmail.pending, state => {\n      state.isLoading = true;\n    }).addCase(verifyEmail.fulfilled, (state, action) => {\n      state.isLoading = false;\n      if (state.user) {\n        state.user.emailVerified = true;\n      }\n    }).addCase(verifyEmail.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  reset\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","user","JSON","parse","localStorage","getItem","initialState","isAuthenticated","isLoading","error","registerUser","userData","thunkAPI","response","post","data","setItem","stringify","_error$response","_error$response$data","message","rejectWithValue","loginUser","_error$response2","_error$response2$data","logoutUser","removeItem","verifyEmail","verificationData","_error$response3","_error$response3$data","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","emailVerified","actions","reducer"],"sources":["C:/Users/Rajtanu/Documents/Desktop/Folders/Files/Hack4Bengal/Round 1/JobSecure/frontend/src/store/slices/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Get user from localStorage\nconst user = JSON.parse(localStorage.getItem('user'));\n\nconst initialState = {\n  user: user || null,\n  isAuthenticated: !!user,\n  isLoading: false,\n  error: null,\n};\n\n// Register user\nexport const registerUser = createAsyncThunk(\n  'auth/register',\n  async (userData, thunkAPI) => {\n    try {\n      const response = await axios.post('/api/auth/register', userData);\n      if (response.data) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n      }\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Registration failed';\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Login user\nexport const loginUser = createAsyncThunk(\n  'auth/login',\n  async (userData, thunkAPI) => {\n    try {\n      const response = await axios.post('/api/auth/login', userData);\n      if (response.data) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n      }\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Login failed';\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Logout user\nexport const logoutUser = createAsyncThunk(\n  'auth/logout',\n  async () => {\n    localStorage.removeItem('user');\n  }\n);\n\n// Verify email with OTP\nexport const verifyEmail = createAsyncThunk(\n  'auth/verifyEmail',\n  async (verificationData, thunkAPI) => {\n    try {\n      const response = await axios.post('/api/auth/verify-email', verificationData);\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message || 'Email verification failed';\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    reset: (state) => {\n      state.isLoading = false;\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Register cases\n      .addCase(registerUser.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(registerUser.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isAuthenticated = true;\n        state.user = action.payload;\n      })\n      .addCase(registerUser.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n        state.user = null;\n        state.isAuthenticated = false;\n      })\n      // Login cases\n      .addCase(loginUser.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(loginUser.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isAuthenticated = true;\n        state.user = action.payload;\n      })\n      .addCase(loginUser.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n        state.user = null;\n        state.isAuthenticated = false;\n      })\n      // Logout case\n      .addCase(logoutUser.fulfilled, (state) => {\n        state.user = null;\n        state.isAuthenticated = false;\n      })\n      // Email verification cases\n      .addCase(verifyEmail.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(verifyEmail.fulfilled, (state, action) => {\n        state.isLoading = false;\n        if (state.user) {\n          state.user.emailVerified = true;\n        }\n      })\n      .addCase(verifyEmail.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { reset } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}